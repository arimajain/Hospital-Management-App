{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Patient history — {{ patient.full_name }}</h2>
  <div><a href="{{ url_for('doctor_dashboard') }}" class="btn btn-secondary btn-sm">Back to Dashboard</a></div>
</div>

<div class="card mb-3 p-3">
  <h5>Patient details</h5>
  <p>
    <strong>Username:</strong> {{ patient.username }}<br>
    <strong>Email:</strong> {{ patient.email or '—' }} &nbsp;
    <strong>Phone:</strong> {{ patient.phone or '—' }} <br>
    <strong>Address:</strong> {{ patient.address or '—' }} &nbsp;
    <strong>Blood group:</strong> {{ patient.blood_group or '—' }}
  </p>
</div>

<div class="card">
  <div class="card-body">
    <h5 class="card-title">Appointments & treatments</h5>

    {% if appointments %}
      <table class="table table-sm">
        <thead>
          <tr><th>Date</th><th>Time</th><th>Doctor</th><th>Status</th><th>Diagnosis</th><th>Prescription</th><th>Notes</th></tr>
        </thead>
        <tbody>
          {% for a in appointments %}
            <tr>
              <td>{{ a.appt_date }}</td>
              <td>{{ a.appt_time }}</td>
              <td>{{ a.doctor_name }}</td>
              <td>{{ a.status }}</td>
              <td>{{ a.diagnosis or '—' }}</td>
              <td>{{ a.prescription or '—' }}</td>
              <td>{{ a.notes or '—' }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div class="alert alert-info">No history available.</div>
    {% endif %}
  </div>
</div>
{% endblock %}
